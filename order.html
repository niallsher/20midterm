<!DOCTYPE html>
	<head>
		<meta name='viewport' content="width=device-width, initial-scale=1">
		<title> KMTN Jewelers </title>
		<link rel="stylesheet" type = "text/css" href="styleSheet.css">
		<style>
			.err{
				visibility: hidden;
				color: #FF0000;
				font-size: 17px;
			}
		
			#note{
				color: #808080;
				font-size: 17px;
			}

			#checkoutLeft {
			    float: left;
			    width: 45%;
			    color: #000000;
			    padding: 10px;
			    text-align: left;
			}

			#checkoutRight {
			    float: right;
			    width: 45%;
			    color: #000000;
			    padding: 10px;
			    /*text-align: left;*/
			}


			#checkoutLeft p {
				margin: 0;
			}

			#organize_right  {
				float: right;
				border: 2px solid #808080;
				margin-top: 50px;

			}

			#sideCost{
			    border-top: 1px solid #808080;
			    text-align: right;
			    padding-right: 10px;
			}
			#sideCost p {
			    margin: 0;
			    padding: 5px 0px;
			}
		</style>
		<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
		<script language="JavaScript">	
			//function to validate inputs from user
			function validate()
			{
				with (document.data)
				{
					document.getElementById('errF').style.visibility='hidden';
					document.getElementById('errL').style.visibility='hidden';
					document.getElementById('errP').style.visibility='hidden';
					document.getElementById('errA').style.visibility='hidden';
					document.getElementById('errC').style.visibility='hidden';
					document.getElementById('errCVV').style.visibility='hidden';
					var finish = true;
					var error = false;

					if (fName.value=="")
					{
						document.getElementById("errF").style.visibility= 'visible';
						error=true;
					}
					if (error) finish = false;
					if (lName.value=="")
					{
						document.getElementById("errL").style.visibility= 'visible';
						error=true;
					}
					if (error) finish = false;
					if (addLn1.value=="")
					{
						document.getElementById("errA").style.visibility= 'visible';
						error=true;
					}
					if (error) finish = false;
					if (phone.value=="")
					{
						document.getElementById("errP").innerHTML = "Phone number is a required field.<br><br>"
						document.getElementById("errP").style.visibility= 'visible';
						error=true;
					}
					if (phone.value != "")
					{
						error = checkPhone();
					}
					if (error) finish = false;

					if (credit.value=="")
					{
						document.getElementById("errC").innerHTML = "Credit Card Number is a required field.<br><br>"	
						document.getElementById("errC").style.visibility= 'visible';
						error=true;
					}	
					if (credit.value != "")
					{
						error = checkCredit();
					}
					if (error) finish = false;
					if (cvv.value=="")
					{
						document.getElementById("errCVV").innerHTML = "CVV is a required field.<br><br>"	
						document.getElementById("errCVV").style.visibility= 'visible';
						error=true;
					}	
					if (cvv.value != "")
					{
						error = checkCVV();
					}
					if (error) finish = false;
					if (finish)	
					{
						sessionStorage.clear();
						document.location.href = "confirmed.html";
						//s="Your order has been confirmed! Expect delivery in 8-12 business days"
						//document.write(s)
					}
					finish = true;
				}
			}
					
			function checkPhone()
			{
				phoneVal = phone.value
				phoneno = /^[\+]?[(]?[0-9]{3}[)]?[-\s\.]?[0-9]{3}[-\s\.]?[0-9]{4,6}$/im;
				//regular expression came from: https://stackoverflow.com/questions/4338267/validate-phone-number-with-javascript
			 	if(phoneVal.match(phoneno))
				{
				 	document.getElementById("errP").innerHTML="<br><br>";
					return false;
				}
				else
				{
					document.getElementById("errP").innerHTML=
							"Phone Number was not entered in a recognized format.<br> Recognized formats are:<br>(555) 555-5555<br>(555)555-5555<br>555-555-5555<br>555.555.5555<br>1234567890<br> +55555555555<br>555-55555555<br><br>";
					document.getElementById("errP").style.visibility= 'visible';
					return true;
				}
			}
			
			function checkCredit()
			{
				creditVal = credit.value
				creditno = /^\d{8,19}$/;
			 	if(creditVal.match(creditno))
				{
				 	document.getElementById("errC").innerHTML="<br><br>";
					return false;
				}
				else
				{
					document.getElementById("errC").innerHTML=
							"Credit Card Number was not entered in a recognized format.<br> Credit Card Number must contain 8 to 19 digits from 0-9.<br><br>";
					document.getElementById("errC").style.visibility= 'visible';
					return true;
				}
			}
					
			function checkCVV()
			{
				cvvVal = cvv.value
				cvvno = /^[0-9]{3,4}$/;
			 	if(cvvVal.match(cvvno))
				{
				 	document.getElementById("errCVV").innerHTML="<br><br>";
					return false;
				}
				else
				{
					document.getElementById("errCVV").innerHTML=
							"CVV was not entered in a recognized format.<br> CVV must contain 3 to 4 digits from 0-9.<br><br>";
					document.getElementById("errCVV").style.visibility= 'visible';
					return true;
				}
			}

		</script>
	</head>
	<body>
		<header>
               
                <a class = "logoBut" href ="index.html" align ="left"> 
                    <img id = "logo" align="left" src="logo.jpg">
                </a>
				<h1> &nbsp; KMTN Jewelers </h1>
            <ul>
                <li><a href="index.html">Home</a></li>
                <li><a href="about.html">About Us</a></li>
                <li><a href="contact.html">Contact Us</a></li>
                <li><a href="productsRings.html">Rings</a></li>
                <li><a href="productsNecklaces.html">Necklaces</a></li>
                <li><a href="productsWatches.html">Watches</a></li>
    			<li><a href="cart.html">Cart</a></li>
            </ul>
		</header>
		<br>
		<h2>Thank you for your order!</h2>
		<br>
		<!-- <div id="checkout"> -->
			<div id="checkoutLeft">
				<p>
					<i>Please enter your information below so we can get you your product(s) to you as soon as possible.</i>
				</p>
				
				<div id="note">Note: * is required field.<br><br></div>
				
		        <form name="data">
					First Name*: <input type="text" id="fName"><div id="errF"  class="err">First Name is a required field.<br><br></div>
					
					Last Name*: <input type="text" id="lName"><div id="errL"  class="err">Last Name is a required field.<br><br></div>
					
					Address Line 1*: <input type="text" id="addLn1"><br>
					Address Line 2: <input type="text" id="addLn2"><div id="errA" class="err">Address Line 1 is a required field.<br><br></div>
					
					Contact Phone*: <input type="text" id="phone" ><div id="errP"  class="err"><br><br></div>
					
					Credit Card Number*: <input type="text" id="credit"><div id="errC" class="err"><br><br></div>
					
					CVV*: <input type="text" id="cvv"><div class="err" id="errCVV"><br><br></div>
							
					<p> <a href="#" id="order" onclick="validate()">Place Order</a></p>
					
				</form>
			</div>
			<div id="checkoutRight">
				<div id="organize_right">
					<div id='cart'>
			            <table id='sidecartTable' border="0" cellpadding="5">
			            	<tr>
			                	<th>Product</th>
			                	<th>Price</th>
			                	<th>Qty.</th>
			              	</tr>

			              	<script language="javascript">
								cartJarr = JSON.parse(sessionStorage.getItem("cartarray"));
				            	var s = "";
				            	for (i = 0; i < cartJarr.length; i++)
				            	{
				            		var namearr = cartJarr[i].name.split(" ");

				                	s += "<tr><td>" + cartJarr[i].name + "</td>";
				                	s += "<td> " + cartJarr[i].price + "</td>";
				                	s += "<td> " + cartJarr[i].quant + "</td></tr>";
				            	}
				            	document.writeln(s);
					        </script>            	
			        	</table>
			        </div>
					<div id="sideCost">
						<p id="Subtotal">Subtotal: </p>
						<p id="Tax">Tax: </p>
						<p id="Total">Total: </p>

					</div>
				</div>
			</div>

			<script language="javascript">
				var cost_str = sessionStorage.getItem("cost_str");
				cost_arr = cost_str.split(" ");

				subtotal = cost_arr[0] - 0;
				tax = cost_arr[1] - 0; 
				total = cost_arr[2] - 0;

				document.getElementById('Subtotal').innerHTML += "$" + subtotal.toFixed(2);
				document.getElementById('Tax').innerHTML += "$" + tax.toFixed(2);
				document.getElementById('Total').innerHTML += "$" + total.toFixed(2);

		</script>
		<!-- </div> -->
    </body>
</html>
